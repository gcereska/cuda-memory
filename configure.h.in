#pragma once

// Whether to use a memory pool for allocation
// (USE_MEMORY_POOL or NOT_USE_MEMORY_POOL).
#define @MEMORY_POOL_OPTION@ 

#ifdef __CUDACC__
  #define DISPATCH_MACRO __device__
  // cumem
  #include <cumem/allocator.cuh>
  #define pmalloc thread_pool::pmalloc
  #define pfree thread_pool::pfree
#else
  #define DISPATCH_MACRO
  #define pmalloc malloc
  #define pfree free
#endif

#define CPU_MEM_POOL_SIZE @CPU_MEM_POOL_SIZE@
#define GPU_MEM_POOL_SIZE @GPU_MEM_POOL_SIZE@

// NOTE: MAX_BLOCKS is for printlayout function, as a buffer is created
// statically, could change to dynamic
#define MEM_MAX_BLOCKS @MEM_MAX_BLOCKS@

#define MEM_MAX_THREADS @MEM_MAX_THREADS@
